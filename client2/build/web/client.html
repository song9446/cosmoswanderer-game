<!DOCTYPE HTML>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title></title>
    <link rel="stylesheet" type="text/css" href="client.css">
  </head>
  <body>
    <div class='container'>
        <div id='loader' class='loader'>
            <div class='spinner'></div>
            <progress value="0" max="1" id="progress" hidden=1></progress>  
        </div>
        <canvas id="canvas" oncontextmenu="event.preventDefault()"></canvas>
    </div>
    <!--<div class="emscripten">
      <input type="checkbox" id="resize">Resize canvas
      <input type="checkbox" id="pointerLock" checked>Lock/hide mouse pointer
      &nbsp;&nbsp;&nbsp;
      <input type="button" value="Fullscreen" onclick="Module.requestFullscreen(document.getElementById('pointerLock').checked, 
                                                                                document.getElementById('resize').checked)">
    </div>-->
    <script type='text/javascript'>
      var progressElement = document.getElementById('progress');
      var Module = {
        print(text){ console.log(text); },
        printErr(text) { console.error(text); },
        canvas: document.getElementById("canvas"), 
        monitorRunDependencies(left){ 
            let loader = document.getElementById('loader'), 
                progress = document.getElementById('progress');
            if(left == 0) loader.style.display = 'none';
            else loader.style.display = 'flex';
            progress.value = progress.max - left;
            progress.max = Math.max(left, progress.max);
            this.print(progress.value + "/" + progress.max);
        }
      };
      window.onerror = ()=>{
        console.error("-- error happening here --");
      };
    </script>
    <script src=client.js></script>
  </body>
</html>
